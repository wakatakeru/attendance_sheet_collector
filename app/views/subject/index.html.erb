<div class="row">
  <div class="col">
    <h2>授業一覧</h2>
  </div>
  <div class="col">
    <%= link_to '新規登録', {controller: :subject, action: :new}, class: 'btn btn-primary float-right'%>
  </div>
</div>
<table class="table">
  <tr>
    <th>実施年度</th>
    <th>授業名</th>
    <th>表示名</th>
    <th>講義</th>
    <th>操作</th>
    <% @subjects.each do |subject| %>
  </tr>
  <tr>
    <td><%= subject.term %></td>
    <td><%= subject.name %></td>
    <td><%= subject.display_name %></td>
    <td>
      <% lessons = subject.lessons %>
      <% lessons.sort {|l1, l2| l1.week <=> l2.week }.each do |l|%>
      <%= link_to "[#{l.week}]", {controller: :lesson, action: :show, id: l.id}%>
      <% end %>
    </td>
    <td>
      <div>
        <%= link_to '授業編集', {controller: :subject, action: :edit, id: subject.id}, class: 'btn-success btn-sm'%>
        <%= link_to '受講者管理', {controller: :subject, action: :show, id: subject.id}, class: 'btn-info btn-sm'%>
      </div>
      <div>
        <%= link_to '講義登録', {controller: :lesson, action: :new, subject_id: subject.id}, class: 'btn-primary btn-sm'%>
        <% if subject.monitored %>
        <%= link_to '監視中止', {controller: :subject, action: :disable_monitoring, id: subject.id}, class: 'btn-dark btn-sm'%>
        <% else %>
        <%= link_to '監視開始', {controller: :subject, action: :enable_monitoring, id: subject.id}, class: 'btn-danger btn-sm'%>
        <% end %>
      </div>
    </td>
  </tr>
  <% end %>
</table>
